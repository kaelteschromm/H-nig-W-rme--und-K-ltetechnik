<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Kontakt & Angebot | Hünig Wärme- und Kältetechnik</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Service, Wartung, Störung, Erneuerung oder Neubau anfragen – Schritt für Schritt, danach Angebot per E-Mail.">
  <style>
    :root{
      --bg:#f7f7f7; --card:#fff; --text:#1a2433; --primary:#14365e; --muted:#5b6b82; --ring:rgba(0,0,0,.08);
      --accent:#e63a2e; --cool:#2e7bd9; --ok:#1a9e68; --warn:#c63c3c; --footer:#e9ecef;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--text); min-height:100vh; display:flex; flex-direction:column;}
    .wrap{max-width:900px;margin:0 auto;padding:0 20px}

    /* Header (Logo + Burger) */
    header{
      position:sticky;top:0;z-index:60;background:rgba(255,255,255,.9);
      backdrop-filter: blur(6px); border-bottom:1px solid #e6e8eb;
      height:64px; display:flex; align-items:center; justify-content:space-between; padding:0 16px;
    }
    .logo{height:36px;width:auto}
    .menu-btn{border:none;background:transparent;cursor:pointer;padding:10px;width:44px;height:44px}
    .menu-btn .bar,.menu-btn .bar::before,.menu-btn .bar::after{
      content:"";display:block;height:3px;width:24px;background:var(--primary);
      border-radius:2px;position:relative;transition:.25s
    }
    .menu-btn .bar::before{position:absolute;top:-8px;left:0}
    .menu-btn .bar::after{position:absolute;top:8px;left:0}

    /* Overlay-Menü */
    .menu-overlay{
      position:fixed;top:0;right:-100%;bottom:0;width:100%;background:rgba(20,54,94,.97);
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      opacity:0;pointer-events:none;transition:all .5s ease;z-index:80
    }
    .menu-overlay.open{right:0;opacity:1;pointer-events:auto}
    .menu-overlay a{
      color:#fff;font-size:1.35rem;margin:.7rem 0;text-decoration:none;
      transform:translateX(100px);opacity:0;
    }
    .menu-overlay.open a{animation:slideIn .5s forwards}
    .menu-overlay a:nth-child(1){animation-delay:.1s}
    .menu-overlay a:nth-child(2){animation-delay:.2s}
    .menu-overlay a:nth-child(3){animation-delay:.3s}
    .menu-overlay a:nth-child(4){animation-delay:.4s}
    .menu-overlay a:nth-child(5){animation-delay:.5s}
    .menu-overlay a:nth-child(6){animation-delay:.6s}
    .menu-overlay a:nth-child(7){animation-delay:.7s}
    .menu-overlay a:nth-child(8){animation-delay:.8s}
    .menu-overlay a:nth-child(9){animation-delay:.9s}
    .menu-overlay a:nth-child(10){animation-delay:1s}
    .menu-overlay a:nth-child(11){animation-delay:1.1s}
    @keyframes slideIn{to{transform:translateX(0);opacity:1}}

    main{padding:24px 0 24px}
    .card{background:var(--card);border-radius:16px;box-shadow:0 6px 24px var(--ring);padding:24px}

    h1{margin:0 0 6px;color:var(--primary);font-size:1.8rem}
    h2{margin:0 0 12px;color:var(--primary)}
    .sub{color:var(--muted);margin:0 0 12px}

    .progress{height:8px;background:#e6e8eb;border-radius:999px;overflow:hidden;margin:12px 0 20px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--cool));transition:width .25s}

    .step{display:none}
    .step.active{display:block}
    .q{font-weight:600;margin:8px 0 12px}
    .options{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:700px){ .options{grid-template-columns:1fr} }
    .opt{border:1px solid #e2e6eb;border-radius:12px;padding:14px;cursor:pointer;background:#fff;text-align:center;user-select:none}
    .opt:hover{border-color:#c9d3df}
    .opt.selected{border-color:var(--primary);box-shadow:0 0 0 3px rgba(20,54,94,.12)}
    .opt small{display:block;color:var(--muted);font-size:.9rem;margin-top:4px}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:700px){ .row{grid-template-columns:1fr} }
    .field{display:flex;flex-direction:column;gap:6px;margin:8px 0}
    label{font-size:.95rem;color:var(--primary)}
    input,select,textarea{border:1px solid #d6dde6;border-radius:10px;padding:10px 12px;font-size:1rem}
    textarea{min-height:120px;resize:vertical}

    .navbtns{display:flex;justify-content:space-between;gap:10px;margin-top:16px}
    .btn{display:inline-block;background:var(--primary);color:#fff;padding:10px 16px;border-radius:10px;text-decoration:none;border:0;cursor:pointer}
    .btn.secondary{background:#e6e8eb;color:#243041}
    .btn.success{background:var(--ok)}
    .hint{color:var(--muted);font-size:.95rem}
    .warn{color:var(--warn);font-size:.95rem}

    .sum{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:700px){ .sum{grid-template-columns:1fr} }
    .sum div{background:#f4f6f9;border:1px solid #e2e6eb;border-radius:12px;padding:12px}
    .sum b{color:var(--primary)}

    /* Footer */
    footer{margin-top:auto;border-top:1px solid #e6e8eb;background:#fff}
    .foot{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;padding:12px 20px;color:var(--muted);font-size:.95rem}
    .foot a{color:var(--muted);text-decoration:none;margin-right:14px}
    .foot a:hover{color:var(--primary)}
    .legal{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
  </style>
</head>
<body>
  <!-- Header: Logo + Burger -->
  <header>
    <a href="index.html" aria-label="Startseite">
      <img src="logo.png" alt="Hünig Logo" class="logo">
    </a>
    <button class="menu-btn" id="menuBtn" aria-label="Menü öffnen"><span class="bar"></span></button>
  </header>

  <!-- Overlay-Menü -->
  <nav class="menu-overlay" id="menuOverlay" aria-label="Hauptmenü">
    <a href="index.html">Startseite</a>
    <a href="waermepumpen.html">Wärmepumpen</a>
    <a href="klimaanlagen.html">Klimaanlagen</a>
    <a href="lueftung.html">Lüftung</a>
    <a href="trinkwasserinstallationen.html">Trinkwasser</a>
    <a href="referenzen.html">Referenzen</a>
    <a href="service.html">Service & Wartung</a>
    <a href="ueber-uns.html">Über uns</a>
    <a href="kontakt.html">Kontakt</a>
    <a href="impressum.html">Impressum</a>
    <a href="datenschutz.html">Datenschutz</a>
  </nav>

  <main class="wrap">
    <div class="card">
      <h1>Was benötigen Sie?</h1>
      <p class="sub">Doppelklick auf <b>Service / Wartung / Störung</b> öffnet direkt das passende Kontaktformular. Doppelklick auf <b>Erneuerung / Neubau</b> startet den Assistenten.</p>

      <div class="progress" aria-label="Fortschritt">
        <div class="bar" id="bar"></div>
      </div>

      <!-- STEP 1: Anliegen -->
      <section class="step active" data-step="1" id="step1">
        <div class="q">Worum geht es?</div>
        <div class="options" role="listbox" aria-label="Anliegen wählen" id="anliegenOptions">
          <button class="opt" data-key="anliegen" data-value="Service">Service <small>Termin anfragen</small></button>
          <button class="opt" data-key="anliegen" data-value="Wartung">Wartung <small>regelmäßige Inspektion</small></button>
          <button class="opt" data-key="anliegen" data-value="Störung">Störung <small>Gerät funktioniert nicht</small></button>
          <button class="opt" data-key="anliegen" data-value="Erneuerung">Erneuerung <small>Altanlage ersetzen</small></button>
          <button class="opt" data-key="anliegen" data-value="Neubau">Neubau <small>Erstanlage planen</small></button>
        </div>
        <div class="navbtns">
          <span></span>
          <button class="btn" data-next>Nächster Schritt</button>
        </div>
      </section>

      <!-- WIZARD für Erneuerung/Neubau -->
      <section class="step" data-step="2">
        <div class="q">Objektart</div>
        <div class="options">
          <button class="opt" data-key="objekt" data-value="Wohnung">Wohnung</button>
          <button class="opt" data-key="objekt" data-value="Einfamilienhaus">Einfamilienhaus</button>
          <button class="opt" data-key="objekt" data-value="Mehrfamilienhaus">Mehrfamilienhaus</button>
          <button class="opt" data-key="objekt" data-value="Gewerbe">Gewerbe</button>
        </div>
        <div class="row">
          <div class="field"><label for="flaeche">Wohn-/Nutzfläche (m²) *</label><input type="number" id="flaeche" min="1" placeholder="z. B. 120" /></div>
          <div class="field"><label for="baujahr">Baujahr *</label><input type="number" id="baujahr" min="1800" max="2100" placeholder="z. B. 1998" /></div>
        </div>
        <div class="navbtns">
          <button class="btn secondary" data-prev>Zurück</button>
          <button class="btn" data-next>Nächster Schritt</button>
        </div>
      </section>

      <section class="step" data-step="3">
        <div class="q">Sanierungsstand *</div>
        <div class="options">
          <button class="opt" data-key="sanierung" data-value="keine">Keine</button>
          <button class="opt" data-key="sanierung" data-value="teilweise">Teilweise (Fenster/Dämmung)</button>
          <button class="opt" data-key="sanierung" data-value="umfassend">Umfassend</button>
        </div>

        <div class="q" style="margin-top:14px">Wärmeabgabe *</div>
        <div class="options">
          <button class="opt" data-key="abgabe" data-value="Heizkörper">Heizkörper</button>
          <button class="opt" data-key="abgabe" data-value="Fußbodenheizung">Fußbodenheizung</button>
          <button class="opt" data-key="abgabe" data-value="Beides">Beides</button>
        </div>

        <div class="q" style="margin-top:14px">Bisherige Heizart *</div>
        <div class="options">
          <button class="opt" data-key="altanlage" data-value="Gas">Gas</button>
          <button class="opt" data-key="altanlage" data-value="Öl">Öl</button>
          <button class="opt" data-key="altanlage" data-value="Pellet">Pellet</button>
          <button class="opt" data-key="altanlage" data-value="Nachtspeicher">Nachtspeicher</button>
          <button class="opt" data-key="altanlage" data-value="Fernwärme">Fernwärme</button>
          <button class="opt" data-key="altanlage" data-value="Keine/Neu">Keine / Neu</button>
          <button class="opt" data-key="altanlage" data-value="Andere">Andere</button>
        </div>

        <div class="navbtns">
          <button class="btn secondary" data-prev>Zurück</button>
          <button class="btn" data-next>Nächster Schritt</button>
        </div>
      </section>

      <section class="step" data-step="4">
        <div class="q">Was ist gewünscht?</div>
        <div class="options">
          <button class="opt" data-key="wunsch" data-value="Wärmepumpe">Wärmepumpe</button>
          <button class="opt" data-key="wunsch" data-value="Klimaanlage">Klimaanlage</button>
          <button class="opt" data-key="wunsch" data-value="Lüftung">Lüftung</button>
          <button class="opt" data-key="wunsch" data-value="Trinkwasser">Trinkwasser</button>
        </div>

        <div class="q" style="margin-top:14px">Wie schnell soll es gehen?</div>
        <div class="options">
          <button class="opt" data-key="zeit" data-value="sofort">Sofort / dringend</button>
          <button class="opt" data-key="zeit" data-value="3monate">In den nächsten 3 Monaten</button>
          <button class="opt" data-key="zeit" data-value="6monate">In 3–6 Monaten</button>
          <button class="opt" data-key="zeit" data-value="flexibel">Flexibel / nach Absprache</button>
        </div>

        <div class="field">
          <label for="bemerkung">Zusatzinfo (optional)</label>
          <textarea id="bemerkung" placeholder="z. B. gewünschte Marke/Leistung, aktuelle Probleme, Fotos folgen per Mail"></textarea>
        </div>

        <div class="navbtns">
          <button class="btn secondary" data-prev>Zurück</button>
          <button class="btn" data-next>Nächster Schritt</button>
        </div>
      </section>

      <section class="step" data-step="5">
        <div class="row">
          <div class="field"><label for="plz">PLZ / Ort *</label><input id="plz" placeholder="z. B. 69120 Heidelberg" /></div>
          <div class="field"><label for="bewohner">Anzahl Bewohner *</label><input type="number" id="bewohner" min="1" placeholder="z. B. 3" /></div>
        </div>
        <div class="field"><label for="adresse">Straße & Hausnummer *</label><input id="adresse" placeholder="z. B. Musterstraße 12" /></div>
        <div class="navbtns">
          <button class="btn secondary" data-prev>Zurück</button>
          <button class="btn" data-next>Nächster Schritt</button>
        </div>
      </section>

      <section class="step" data-step="6">
        <div class="q">Ihre Angaben (Zusammenfassung)</div>
        <div class="sum" id="summary"></div>

        <hr style="border:none;border-top:1px solid #e6e8eb;margin:16px 0">

        <div class="row">
          <div class="field"><label for="nameB">Ihr Name *</label><input id="nameB" required placeholder="Vor- und Nachname" /></div>
          <div class="field"><label for="emailB">E-Mail *</label><input type="email" id="emailB" required placeholder="ihre.email@beispiel.de" /></div>
        </div>
        <div class="row">
          <div class="field"><label for="telefonB">Telefon</label><input id="telefonB" placeholder="+49 ..." /></div>
          <div class="field"><label for="wunschterminB">Wunschtermin</label><input id="wunschterminB" placeholder="z. B. KW 45" /></div>
        </div>
        <div class="field"><label for="nachrichtB">Nachricht (optional)</label><textarea id="nachrichtB" placeholder="Weitere Hinweise, Erreichbarkeit …"></textarea></div>

        <p class="hint">Beim Absenden werden Ihre Angaben per E-Mail an uns gesendet. Sie erhalten eine Bestätigung.</p>
        <p class="warn" id="errB" style="display:none">Bitte füllen Sie mindestens Name, E-Mail und die Pflichtfelder aus.</p>

        <div class="navbtns">
          <button class="btn secondary" data-prev>Zurück</button>
          <button class="btn success" id="sendBtnB">Anfrage absenden</button>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="wrap foot">
      <div>© <span id="y"></span> Hünig Wärme- und Kältetechnik</div>
      <div class="legal" aria-label="Rechtliche Links">
        <a href="impressum.html">Impressum</a>
        <a href="datenschutz.html">Datenschutz</a>
        <a href="agb.html">AGB</a>
        <a href="nutzungsbedingungen.html">Nutzungsbedingungen</a>
        <a href="kontakt.html">Kontakt</a>
      </div>
    </div>
  </footer>

  <script>
    // Footer-Jahr
    document.getElementById('y').textContent = new Date().getFullYear();

    // Menü
    const menuBtn  = document.getElementById('menuBtn');
    const overlay  = document.getElementById('menuOverlay');
    menuBtn.addEventListener('click', ()=> overlay.classList.toggle('open'));
    overlay.querySelectorAll('a').forEach(a=> a.addEventListener('click', ()=> overlay.classList.remove('open')));

    // Wizard-State
    const steps = Array.from(document.querySelectorAll('.step'));
    const bar = document.getElementById('bar');
    let current = 0;
    const data = {};
    const SEND_TO = 'FORM_ENDPOINT_HIER_EINSETZEN'; // z.B. https://formspree.io/f/abcdxyz

    function updateProgress(){
      const visible = steps.filter(s => s.style.display !== 'none' || s.classList.contains('active'));
      const idx = visible.indexOf(steps[current]);
      const total = visible.length;
      const pct = Math.max(0, ((idx+1) / total) * 100);
      bar.style.width = pct + '%';
    }
    function showStep(i){
      steps.forEach((s, idx)=> s.classList.toggle('active', idx===i));
      current = i; updateProgress();
      if (steps[i].dataset.step === '6') renderSummary();
    }
    updateProgress();

    // Single-Select + Doppelklick-Logik
    document.getElementById('anliegenOptions').addEventListener('click', (e)=>{
      const btn = e.target.closest('.opt'); if(!btn) return;
      document.querySelectorAll('#anliegenOptions .opt').forEach(o=>o.classList.remove('selected'));
      btn.classList.add('selected');
      data.anliegen = btn.dataset.value;
    });
    document.getElementById('anliegenOptions').addEventListener('dblclick', (e)=>{
      const btn = e.target.closest('.opt'); if(!btn) return;
      const val = btn.dataset.value;
      data.anliegen = val;
      if (val === 'Service')   { window.location.href = 'service.html'; return; }
      if (val === 'Wartung')   { window.location.href = 'wartung.html'; return; }
      if (val === 'Störung')   { window.location.href = 'stoerung.html'; return; }
      // Erneuerung/Neubau -> Wizard starten
      steps.forEach(s => { s.style.display = (s.dataset.step === 'A') ? 'none' : ''; });
      showStep(1); // gehe zu Step 2 (Index 1)
    });

    // Weiter/Zurück Buttons
    document.querySelectorAll('[data-next]').forEach(b=>{
      b.addEventListener('click', ()=>{
        const stepId = steps[current].dataset.step;
        if (stepId==='1'){
          if (!data.anliegen) return alert('Bitte Anliegen doppelklicken oder „Nächster Schritt“ nach Auswahl.');
          if (['Service','Wartung','Störung'].includes(data.anliegen)) return; // per Doppelklick bereits umgeleitet
          // sonst Wizard
          steps.forEach(s => { s.style.display = (s.dataset.step === 'A') ? 'none' : ''; });
        }
        if (stepId==='2'){
          if (!data.objekt) return alert('Bitte Objektart wählen.');
          const fl = document.getElementById('flaeche').value.trim();
          const bj = document.getElementById('baujahr').value.trim();
          if (!fl || !bj) return alert('Bitte Fläche und Baujahr eintragen.');
          data.flaeche = fl; data.baujahr = bj;
        }
        if (stepId==='3'){
          if (!data.sanierung) return alert('Bitte Sanierungsstand wählen.');
          if (!data.abgabe) return alert('Bitte Wärmeabgabe wählen.');
          if (!data.altanlage) return alert('Bitte bisherige Heizart wählen.');
        }
        if (stepId==='4'){
          if (!data.wunsch) return alert('Bitte Wunsch auswählen.');
          if (!data.zeit) return alert('Bitte Zeitrahmen wählen.');
          data.bemerkung = document.getElementById('bemerkung').value.trim();
        }
        if (stepId==='5'){
          const plz = document.getElementById('plz').value.trim();
          const adr = document.getElementById('adresse').value.trim();
          const bew = document.getElementById('bewohner').value.trim();
          if (!plz || !adr || !bew) return alert('Bitte PLZ/Ort, Straße und Anzahl Bewohner angeben.');
          data.plz = plz; data.adresse = adr; data.bewohner = bew;
        }
        if (current < steps.length-1) showStep(current+1);
      });
    });
    document.querySelectorAll('[data-prev]').forEach(b=> b.addEventListener('click', ()=> showStep(Math.max(0,current-1))));

    // Click-Handler für alle Optionsgruppen (nicht nur Anliegen)
    document.querySelectorAll('.options').forEach(group=>{
      group.addEventListener('click', (e)=>{
        const btn = e.target.closest('.opt'); if(!btn) return;
        group.querySelectorAll('.opt').forEach(o=>o.classList.remove('selected'));
        btn.classList.add('selected');
        const key = btn.dataset.key; const value = btn.dataset.value;
        if (key) data[key] = value;
      });
      group.addEventListener('dblclick', (e)=>{
        const btn = e.target.closest('.opt'); if(!btn) return;
        const key = btn.dataset.key; const value = btn.dataset.value;
        if (key) data[key] = value;
        // bei Doppelklick im Wizard direkt weiter
        const stepEl = group.closest('.step');
        if (stepEl && !['1'].includes(stepEl.dataset.step)){
          document.querySelector('[data-next]')?.click();
        }
      });
    });

    function renderSummary(){
      const el = document.getElementById('summary');
      el.innerHTML = `
        <div><b>Anliegen:</b><br>${data.anliegen||'-'}</div>
        <div><b>Objekt:</b><br>${data.objekt||'-'}</div>
        <div><b>Fläche (m²):</b><br>${data.flaeche||'-'}</div>
        <div><b>Baujahr:</b><br>${data.baujahr||'-'}</div>
        <div><b>Sanierung:</b><br>${data.sanierung||'-'}</div>
        <div><b>Wärmeabgabe:</b><br>${data.abgabe||'-'}</div>
        <div><b>Bisherige Heizart:</b><br>${data.altanlage||'-'}</div>
        <div><b>Wunsch:</b><br>${data.wunsch||'-'}</div>
        <div><b>Zeitrahmen:</b><br>${data.zeit||'-'}</div>
        <div><b>PLZ/Ort:</b><br>${data.plz||'-'}</div>
        <div><b>Straße:</b><br>${data.adresse||'-'}</div>
        <div><b>Bewohner:</b><br>${data.bewohner||'-'}</div>
        <div style="grid-column:1/-1"><b>Zusatzinfo:</b><br>${(data.bemerkung||'').replace(/\n/g,'<br>')||'-'}</div>
      `;
    }

    async function sendToFormspree(payload){
      try{
        const res = await fetch(SEND_TO, {
          method:'POST',
          headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        return res.ok;
      }catch(e){ return false; }
    }

    // Abschicken (Wizard)
    document.getElementById('sendBtnB')?.addEventListener('click', async ()=>{
      const name = document.getElementById('nameB').value.trim();
      const email = document.getElementById('emailB').value.trim();
      if (!name || !email) { document.getElementById('errB').style.display='block'; return; }

      const summaryText = `
Anliegen: ${data.anliegen||'-'}
Objekt: ${data.objekt||'-'}
Fläche (m²): ${data.flaeche||'-'}
Baujahr: ${data.baujahr||'-'}
Sanierung: ${data.sanierung||'-'}
Wärmeabgabe: ${data.abgabe||'-'}
Bisherige Heizart: ${data.altanlage||'-'}
Wunsch: ${data.wunsch||'-'}
Zeitrahmen: ${data.zeit||'-'}
PLZ/Ort: ${data.plz||'-'}
Straße: ${data.adresse||'-'}
Bewohner: ${data.bewohner||'-'}
Zusatzinfo: ${(data.bemerkung||'')}
      `.trim();

      const payload = {
        to: "kaelteschromm@gmail.com",
        _subject: "Neue Anfrage (Erneuerung/Neubau) über huenig.com",
        _page: location.href,
        'Zusammenfassung': summaryText,
        name, email,
        telefon: document.getElementById('telefonB').value.trim(),
        wunschtermin: document.getElementById('wunschterminB').value.trim(),
        nachricht: document.getElementById('nachrichtB').value.trim(),
        ...data
      };

      const ok = await sendToFormspree(payload);
      alert(ok ? 'Danke! Ihre Anfrage wurde gesendet.' : 'Senden fehlgeschlagen. Bitte später erneut versuchen oder per E-Mail.');
      if (ok) location.href = 'index.html';
    });
  </script>
</body>
</html>
